<two-columns>
    <loader data="mod" spinner-class="big-spinner">
        <div class="mod-header-color">
            <div class="page-container mod-header">
                <section>
                    <div class="quality-value action-box">
                        <span class="reputation-number">{{mod.reputation}}</span>
                        REPUTATION
                    </div>

                    <div class="mod-info">
                        <span class="mod-name">{{mod.name}}</span>
                        <span class="mod-authors-container">by
                            <span class="mod-authors">{{mod.nexus_infos.authors}}</span>
                        </span>
                        <!--<span ng-repeat="author in mod.authors">
                            <a ng-href="#/user/{{author.id}}">{{author.username}}</a>
                        </span>-->
                        <br>
                        <!-- TODO: reviews currently are on tab 1 -> should be dynamic anyway -> ui-router :D -->
                        <a ng-click="currentTab = tabs[2]">{{mod.reviews.length}} reviews</a>
                        <!-- TODO: add this with css :after content -->
                        <span class="divider">
                            |
                        </span>

                        <!--Included in <a ng-href="#/modlists/includingMod/{{mod.id}}">{{mod.mod_modlists_count}} modlists</a>
                        <span class="divider">
                            |
                        </span>-->

                        <span ng-if="mod.aliases">
                            <strong>Aliases: </strong>{{mod.aliases}}
                            <span class="divider">
                                |
                            </span>
                        </span>

                        <!-- TODO: should probably only be visible to the MA / scraper dude-->
                        <a ng-href="#/editMod/{{mod.id}}">Edit</a>
                    </div>
                </section>

                <section>
                    <div class="mod-header-box">
                        <!-- TODO: I feel like using some spans here would be wiser -->
                        ACTIONS
                        <div class="action-box btn-round">
                            <i class="fa fa-heart" aria-hidden="true"></i>
                            Favorite
                        </div>
                        <div class="action-box btn-round">
                            <i class="fa fa-plus" aria-hidden="true"></i>
                            Add to mod list
                        </div>
                    </div>

                    <div class="mod-header-box">
                        STATUS
                        <div class="action-box {{statusClass}}">
                            {{mod.status}}
                        </div>
                    </div>
                </section>
            </div>
        </div>

        <messages   success-bool="showSuccess"
            errors="errors"
            success-message="{{submitMessage}}">
        </messages>

        <div class="page-container">
            <loader data="mod" spinner-class="big-spinner">
                <div class="left-column left-mod-column wide-column">

                    <!--Image-->
                    <section ng-if="mod.image">
                        <img ng-src="{{mod.image}}" class="mod-image"/>
                    </section>

                    <!--Sources-->
                    <h3 class="section-title">Sources</h3>
                    <section class="sources">
                        <!-- TODO: I feel like this redundancy here can be killed with a directive -->
                        <a ng-href="http://www.nexusmods.com/{{game}}/mods/{{mod.nexus_infos.id}}">
                            <div class="action-box source-box" ng-if="mod.nexus_infos">
                                <img src="/assets/nexus_logo" class="source-image"/>
                            </div>
                        </a>
                        <a ng-href="">
                            <div class="action-box source-box" ng-if="mod.steam_info">
                                <img src="/assets/steam_logo" class="source-image" />
                            </div>
                        </a>
                        <a ng-href="">
                            <div class="action-box source-box" ng-if="mod.lovers_info">
                                <img src="/assets/lovers_logo" class="source-image" />
                            </div>
                        </a>
                    </section>

                    <!--Requirements-->
                    <h3 ng-if="currentVersion.required_mods.length" class="section-title">Requirements</h3>
                    <section ng-if="currentVersion.required_mods.length">
                        <ol class="requirements-list">
                            <li ng-repeat="requirement in requirements">
                                <a ng-href="#/mod/{{requirement.id}}">
                                    <strong>{{requirement.name}}</strong>
                                </a>
                                <span ng-if="requirement.aliases">({{requirement.aliases}})</span>
                            </li>
                        </ol>
                    </section>

                    <!--Categories-->
                    <!-- TODO: one line if for readability (even though I like the idea of this ;3 )-->
                    <h3 class="section-title">Categor<span ng-hide="secondCategory">y</span><span ng-show="secondCategory">ies</span></h3>
                    <section>
                        <div ng-show="mod.primary_category_id" class="action-box">{{firstCategory}}</div>
                        <div ng-show="mod.secondary_category_id" class="action-box">{{secondCategory}}</div>
                    </section>

                    <!--Tags-->
                    <h3 class="section-title">Tags</h3>
                    <section>
                        <tag-selector active-tags="mod.tags" new-tags="newTags" max-tags="10" show-mods-count="true" show-add="userCanAddTags" ></tag-selector>
                    </section>

                    <!--Nexus Stats-->
                    <!-- TODO: kill redundancy-->
                    <div class="stat-block" ng-if="mod.nexus_infos">
                        <div class="stat-block-title" ng-click="nexusExpanded = !nexusExpanded">
                           <h3 class="section-title">Nexus stats</h3>
                           <i class="fa fa-plus stat-expander" aria-hidden="true" ng-hide="nexusExpanded"></i>
                           <i class="fa fa-minus stat-expander" aria-hidden="true" ng-show="nexusExpanded"></i>
                        </div>
                        <section ng-show="nexusExpanded">
                            <nexus-block></nexus-block>
                        </section>
                    </div>
                    <div class="stat-block" ng-if="mod.workshop_infos" ng-click="steamExpanded = !steamExpanded">
                        <div class="stat-block-title">
                           <h3 class="section-title">Steam stats</h3>
                           <i class="fa fa-plus stat-expander" aria-hidden="true" ng-hide="nexusExpanded"></i>
                           <i class="fa fa-minus stat-expander" aria-hidden="true" ng-show="nexusExpanded"></i>
                        </div>
                        <section ng-show="steamExpanded">
                            <steam-block></steam-block>
                        </section>
                    </div>
                    <div class="stat-block" ng-if="mod.lovers_info" ng-click="loversExpanded = !loversExpanded">
                        <div class="stat-block-title">
                           <h3 class="section-title">Lover's Lab stats</h3>
                           <i class="fa fa-plus stat-expander" aria-hidden="true" ng-hide="nexusExpanded"></i>
                           <i class="fa fa-minus stat-expander" aria-hidden="true" ng-show="nexusExpanded"></i>
                        </div>
                        <section ng-show="loversExpanded">
                            <lovers-block></lovers-block>
                        </section>
                    </div>

                </div>
                <div class="right-column tabs-column">
                    <tabs current-tab="currentTab" tabs="tabs"></tabs>
                    <div ng-include="currentTab.url" class="mod-tab"></div>
                </div>
            </loader>
        </div>
    </loader>
</two-columns>
