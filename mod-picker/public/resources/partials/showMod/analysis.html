<!--TODO: maybe ng-if some stuff here -->


<loader data="mod.plugins" content-class="" spinner-class="big-spinner">
    <div class="mod-tab-items" ng-if="mod.plugins.length > 0">
        <span class="mod-tab-item">
            Plugins
            <select ng-model="currentPlugin" ng-options="plugin as plugin.filename for plugin in plugins" class="plugin-selector" ng-change="getPlugin()"></select>
        </span>
    </div>

    <div class="content-block plugins-block" ng-if="mod.plugins.length > 0">
        <div class="content-title">
            Plugins
        </div>

        <div class="metadata-section">
            <h3 class="section-title">Metadata</h3>
            <section>
                <dt class="metadata-title">Plugin Author</dt>
                <dd class="metadata-data">{{currentPlugin.author}}</dd>

                <dt class="metadata-title">Plugin Version</dt>
                <dd class="metadata-data"><em>no data here</em></dd>

                <dt class="metadata-title">Masters</dt>
                <dd class="metadata-data"><em>no data here</em></dd>

                <dt class="metadata-title">Plugin Description</dt>
                <dd class="metadata-data">{{currentPlugin.description}}</dd>

                <dt class="metadata-title">Filesize</dt>
                <dd class="metadata-data"><em>no data here</em></dd>

                <dt class="metadata-title">File Hash</dt>
                <dd class="metadata-data">{{currentPlugin.crc_hash}}</dd>

                <dt class="metadata-title">Number of Overrides</dt>
                <dd class="metadata-data"><em>no data here</em></dd>
            </section>
        </div>

        <div class="records-section">
            <h3 class="section-title">Records</h3>
            <section>
                <table class="analysis-table">
                    <thead>
                    <tr>
                        <th>Record Type</th>
                        <th>Number of Records</th>
                        <th>Number of Overrides</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr ng-repeat="plugin_record_group in currentPlugin.plugin_record_groups">
                        <td>{{plugin_record_group.signature}}</td>
                        <td>{{plugin_record_group.new_records}}</td>
                        <td>{{plugin_record_group.override_records}}</td>
                    </tr>
                    </tbody>
                </table>
            </section>
        </div>

        <div class="errors-section">
            <h3 class="section-title"></h3>
            <section>
                <table class="analysis-table">
                    <thead>
                    <tr>
                        <th>Signature</th>
                        <th>FormID</th>
                        <th>Type</th>
                        <th>Name</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr ng-repeat="plugin_error in currentPlugin.plugin_errors">
                        <td>{{plugin_error.signature}}</td>
                        <td>{{plugin_error.form_id}}</td>
                        <td>{{plugin_error.type}}</td>
                        <td>{{plugin_error.name}}</td>
                    </tr>
                    </tbody>
                </table>
            </section>
        </div>

        <div class="overrides-section">
            <h3 class="section-title">Overrides</h3>
            <section>
                <div ng-repeat="override_record in override_records">
                    <em>plugin name</em>
                    -
                    [{{override_record.sig}}:{{override_record.fid}}]
                </div>
            </section>
        </div>
    </div>

    <div class="content-block" ng-if="mod.assets.length > 0">
        <div class="content-title">
            Assets
        </div>

        <div class="assets-block">
            <asset-tree data="treeData"></asset-tree>
        </div>
    </div>

    <div class="no-content-message" ng-if="mod.assets.length == 0 && mod.plugins.length == 0">
        There is no analysis available for this mod.
    </div>
</loader>


