<!DOCTYPE html>
<html lang="en" ng-app="modPicker">
<head>
  <meta charset="UTF-8">
  <title>Mod Picker: Angular Preview</title>
  <link href='https://fonts.googleapis.com/css?family=Roboto:400,700,500' rel='stylesheet' type='text/css'>
  <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
  <%= stylesheet_link_tag 'rzslider.min' %>
  <%= stylesheet_link_tag @current_theme %>
  <script>
    window._token = '<%= form_authenticity_token %>';
    window._current_theme = '<%= @current_theme %>';
    window._current_game_id = <%= @current_game.id %>;
    window._stylesheets = {
      whiterun: "<%= stylesheet_path 'Whiterun' %>",
      darkwater: "<%= stylesheet_path 'Darkwater' %>",
      blackreach: "<%= stylesheet_path 'Blackreach' %>",
      high_hrothgar: "<%= stylesheet_path 'High Hrothgar' %>"
    }
  </script>
</head>
<body>
<header>
  <div class="page-container">
    <div class="header">
      <a class="logo" href="/"><h1>Mod Picker</h1></a>
      <div class="nav-controls">
        <ul class="user-nav">
          <% if User.exists?(current_user.id) %>
              <li>
                Welcome <%= link_to current_user.username, "#/profile/#{current_user.id}" %>
              </li>
              <li>
                <a href="#/settings/mod_lists">Saved Mod Lists</a>
              </li>
              <li>
                <a href="#/settings">Settings</a>
              </li>
              <li>
                <a href="/users/sign_out">Log Out</a>
              </li>
          <% else %>
              <li>
                <a href="/users/sign_in">Log In</a>
              </li>
              <li>
                <a href="/users/sign_up">Register</a>
              </li>
          <% end %>
          <li>
            <a>
              <form method="post" action="/qapi/switch_game/" id="form_game_select">
                <select id="game_select" class="game-selector icon-sk hasCustomSelect" name="cc">
                  <option value="sk" selected="selected">Skyrim</option>
                  <option value="fo4">Fallout 4</option>
                  <option value="fnv">Fallout NV</option>
                  <option value="fo3">Fallout 3</option>
                  <option value="ob">Oblivion</option>
                </select><span style="display: inline-block;" class="customSelect language-selector icon-sk"><span style="display: inline-block;" class="customSelectInner">Skyrim</span></span>
              </form>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</header>
<nav>
  <div class="page-container">
    <div class="nav-wrapper clearfix">
      <div class="primary-nav">
        <a class="nav-modlist" href="#">
          <span class="nav-icon">
            <i class="fa fa-pencil-square-o"></i>
          </span>
          <span class="nav-text">
            <b>Edit your</b>
            Mod List
          </span>
        </a>
        <a class="nav-contributions" href="#">
          <span class="nav-icon">
            <i class="fa fa-comments"></i>
          </span>
          <span class="nav-text">
            <b>View recent</b>
            Contributions
          </span>
        </a>
        <a class="nav-browse-modlists" href="#">
          <span class="nav-icon">
            <i class="fa fa-list"></i>
          </span>
          <span class="nav-text">
            <b>See all</b>
            Public Mod Lists
          </span>
        </a>
        <a class="nav-browse-mods" href="#/mods">
          <span class="nav-icon">
            <i class="fa fa-globe"></i>
          </span>
          <span class="nav-text">
            <b>Browse</b>
            Skyrim Mods
          </span>
          <span class="nav-dropdown"></span>
        </a>
        <a class="nav-submit-mod" href="#/submit">
          <span class="nav-icon">
            <i class="fa fa-plus-square"></i>
          </span>
          <span class="nav-text">
            <b>Submit</b>
            A Skyrim Mod
          </span>
        </a>
      </div>
      <div class="secondary-nav">
        <div class="search" ng-controller="searchInputController">
          <form>
            <input class="search-field" type="text" autocomplete="off" ng-model="search" placeholder="Search...">
            <div class="loadingButtonContainer">
              <input class="btn action-btn" type="submit" value="Search" ng-click="processSearch()" ng-hide="loading"/>
              <loader data="!!!loading"></loader>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</nav>

<%= yield %>

<!-- defered load of scripts, which is way more performant for browsers -->
<%= javascript_include_tag 'angular.min.1.5.1' %>
<%= javascript_include_tag 'angular-route.min.1.5.1' %>
<%= javascript_include_tag 'heartcode-canvasloader-min' %>
<%= javascript_include_tag 'rzslider.min' %>
<%= javascript_include_tag 'modpicker' %>
<%= javascript_include_tag 'angular-animate.min' %>
<%= javascript_include_tag 'zip' %>
<%= javascript_include_tag 'rar' %>
</body>
</html>